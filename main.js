const dictionary = {
    // [성씨 및 도입부 글자]
    '김': {
        start: ['기도의 깊은 향기가 하늘 보좌에 상달되어 당신을 감싸고,', '기쁨의 노래가 당신의 하루를 환하게 열어주는 축복이 있길,'],
        mid: ['기쁨이 샘물처럼 솟아나 당신의 주변을 환하게 밝히며,', '기도로 세상을 이기는 믿음의 단단함이 날마다 깊어지고,'],
        end: ['기적 같은 주님의 사랑이 평생에 가득하시길 간절히 축복합니다.', '기다려온 소망의 열매가 삶에 풍성히 맺히길 늘 기도할게요.']
    },
    '이': {
        start: ['이토록 크신 하나님의 사랑이 당신의 오늘을 포근히 덮고,', '이슬같이 맑은 주의 평강이 당신의 마음과 생각을 지키며,'],
        mid: ['이제는 주님 안에서 참된 안식을 누리는 하늘 기쁨을 알고,', '이 땅에 주의 나라를 세우는 아름다운 사랑의 통로가 되어,'],
        end: ['이름만 불러도 위로가 되는 주와 평생토록 동행하시길 축복해요.', '이전보다 더 큰 은혜를 누리는 가장 복된 인생 되시길 원합니다.']
    },
    '박': {
        start: ['밝은 미소 뒤에 숨겨진 주님의 세밀한 위로를 깊이 경험하고,', '박수 소리 가득한 찬양의 고백이 당신의 입술에 날마다 넘치며,'],
        mid: ['밝게 빛나는 주의 영광을 온 세상에 전하는 소금과 빛이 되고,', '박토를 옥토로 바꾸시는 주님의 놀라운 창조의 능력을 맛보며,'],
        end: ['박사보다 지혜로운 하늘의 영감을 날마다 풍성히 누리길 기도해요.', '밝아오는 소망의 아침이 당신의 삶을 영원히 비추길 축복합니다.']
    },
    '최': {
        start: ['최고의 예배자로 주님 앞에 거룩하고 순결하게 서는 은혜가 있고,', '최초의 사랑 그 설렘과 감격을 날마다 새롭게 회복하여 나아가며,'],
        mid: ['최선을 다해 믿음의 선한 싸움을 싸우는 당신의 용기를 응원하고,', '최상의 가치인 복음을 위해 삶을 기쁨으로 드리는 헌신을 통해,'],
        end: ['최후의 승리를 주시는 주님 안에서 영원한 평안을 누리길 축복합니다.', '최종적인 영광의 면류관을 얻는 가장 빛나는 승리자 되소서.']
    },
    '정': {
        start: ['정결한 마음으로 주를 바라보는 당신의 모습이 참으로 아름답고,', '정성 가득한 당신의 예배를 하나님께서 향기로운 제물로 받으시며,'],
        mid: ['정의가 강물처럼 흐르는 세상을 만드는 복된 주님의 일꾼이 되고,', '정직하고 고운 성품으로 예수님의 향기를 온 땅에 널리 전하며,'],
        end: ['정오의 햇살보다 밝게 빛나는 주의 축복을 평생 누리길 기도해요.', '정든 주의 품 안에서 세상이 줄 수 없는 평안을 얻으시길 축복합니다.']
    },
    '장': {
        start: ['장성한 분량까지 당신의 믿음이 자라나 주를 기쁘시게 하고,', '장막 터를 넓히시는 하나님의 축복이 당신의 가정에 가득하며,'],
        mid: ['장차 나타날 영광을 소망하며 오늘의 고난을 넉넉히 이겨내고,', '장인처럼 정교하게 당신의 삶을 빚으시는 주의 손길을 신뢰하며,'],
        end: ['장대하게 뻗어가는 믿음의 가문을 이루는 복을 누리길 축복합니다.', '장소에 상관없이 어디서나 주를 예배하는 참된 예배자 되소서.']
    },
    '임': {
        start: ['임마누엘 하나님이 당신의 모든 순간에 함께 계심을 믿으며,', '임재의 깊은 바다로 나아가 주님의 세밀한 음성을 듣는 오늘 되길,'],
        mid: ['임명하신 사명의 자리에서 묵묵히 충성하여 생명의 꽃을 피우고,', '임시적인 세상의 가치보다 영원한 하늘의 보화를 귀히 여기며,'],
        end: ['임금 되신 주님의 통치 아래서 참된 자유와 평강을 누리소서.', '임하신 성령의 불길이 당신의 영혼을 뜨겁게 달구길 축복합니다.']
    },
    '한': {
        start: ['한결같은 주님의 인자하심이 당신의 고단한 마음을 안아주고,', '환한 미소 속에 깃든 주의 평안이 만나는 모든 이에게 전해지며,'],
        mid: ['한마음으로 주를 섬기며 당신이 속한 공동체에 활력을 불어넣고,', '한국과 열방을 품고 기도하는 하나님의 신실한 지도자로 자라나서,'],
        end: ['한계 없는 하나님의 축복이 당신의 평생에 쏟아지길 기도해요.', '한결같이 당신을 지키시는 주님을 소리 높여 찬양하며 살아가길.']
    },
    '오': {
        start: ['오직 주님만이 내 삶의 주인 되심을 담대히 선포하며 시작하고,', '오묘하신 하나님의 섭리가 당신의 삶을 가장 선한 길로 인도하며,'],
        mid: ['오늘이라는 선물 속에서 주와 함께 걷는 작은 천국을 경험하고,', '오래 참음과 온유함의 열매가 당신의 성품 속에서 예쁘게 맺혀서,'],
        end: ['오직 예수 그리스도의 은혜만이 당신의 삶에 가득하길 축복합니다.', '오늘보다 내일이 더 빛나는 믿음의 거목으로 우뚝 서시길.']
    },
    '서': {
        start: ['서광이 비치는 아침처럼 당신의 삶에 소망의 문이 활짝 열리고,', '서로 사랑하라는 주의 말씀을 온 마음 다해 실천하는 당신이 되길,'],
        mid: ['서약하신 하나님의 약속이 당신의 삶에서 하나씩 성취되는 것을 보고,', '서두르지 않고 주님의 때를 기다리는 인내의 믿음이 깊어져서,'],
        end: ['서로를 세워주는 아름다운 사랑의 통로로 귀하게 쓰임 받으소서.', '서 있는 그곳이 바로 주님을 만나는 거룩한 성소가 되길 축복해요.']
    },
    '신': {
        start: ['신실하신 하나님이 당신의 약속을 반드시 이루심을 끝까지 믿고,', '신령한 복과 땅의 기름진 복이 당신의 삶과 가정 위에 가득하며,'],
        mid: ['새로운 피조물로서 이전 것은 지나고 주의 영광을 위해 살아가며,', '신앙의 경주를 끝까지 마치는 인내와 용기가 당신의 심령에 부어지고,'],
        end: ['신비로운 주의 평강이 당신의 모든 생각을 굳게 지켜주시길.', '신랑 되신 주님을 맞이할 순결한 신부처럼 늘 깨어 기도하소서.']
    },
    '권': {
        start: ['권능의 오른팔로 당신을 붙드시는 하나님의 능력을 신뢰하고,', '권세 있는 주의 말씀이 당신의 삶에 능력으로 나타나는 하루 되길,'],
        mid: ['권위보다 섬김의 본을 보이신 예수님의 발자취를 따라 걸으며,', '권면하시는 성령님의 목소리에 귀 기울여 지혜로운 선택을 하고,'],
        end: ['권위주의를 버리고 사랑으로 영혼을 돌보는 목자가 되소서.', '권능으로 세상을 이기는 강력한 믿음의 용사 되길 축복합니다.']
    },
    '황': {
        start: ['황금보다 귀한 주의 말씀을 당신의 마음 판에 깊이 새기고,', '황무지 같은 세상 속에서도 하늘 소망을 발견하는 영안이 열리길,'],
        mid: ['황홀한 주의 임재 안에서 영혼의 참된 기쁨과 만족을 누리며,', '황폐한 마음을 고치시고 새 살이 돋게 하시는 주의 손길을 경험해,'],
        end: ['황폐한 이 땅을 치유하는 하나님의 눈물이 당신의 눈물이 되길.', '황금 성 예루살렘을 향해 나아가는 거룩한 나그네 되소서.']
    },
    '안': {
        start: ['안전하게 당신을 지키시는 하나님의 날개 아래서 평안을 얻고,', '안식의 기쁨이 당신의 영혼 깊은 곳에서부터 샘솟는 하루 되길,'],
        mid: ['안팎으로 밀려오는 시련 속에서도 주님 한 분만으로 만족하며,', '안개 같은 세상 속에서 변치 않는 주의 진리를 등불로 삼아 걷고,'],
        end: ['안위하시는 성령님의 위로가 당신의 눈물을 닦아주시길 축복해요.', '안주하지 않고 더 높은 곳을 향해 비상하는 믿음의 장부 되소서.']
    },
    '송': {
        start: ['송이꿀보다 더 달콤한 주의 말씀이 당신의 영혼을 살찌우고,', '송축하며 주를 높이는 찬양의 소리가 당신의 가정에 가득하며,'],
        mid: ['송구한 마음으로 주 앞에 서서 십자가의 은혜를 깊이 묵상하고,', '송알송알 맺힌 땀방울처럼 당신의 수고가 주 안에서 결실을 맺어,'],
        end: ['송두리째 주님께 드린 삶이 가장 값진 향유 옥합이 될 거예요.', '송화 가루처럼 주의 복음이 당신을 통해 널리 퍼져나가길 축복해요.']
    },
    '전': {
        start: ['전능하신 하나님의 손길이 당신의 모든 연약함을 강건케 하고,', '전심으로 주를 찾는 당신에게 하늘 보화가 열리는 기적이 임하며,'],
        mid: ['전부이신 예수 그리스도를 삶의 주인으로 모시고 당당히 살아가며,', '전례 없는 주의 기적과 은총을 당신의 일상에서 매일 증거하여,'],
        end: ['전신 갑주를 입고 어둠의 권세를 믿음으로 넉넉히 이겨내소서.', '전 세계에 주의 사랑을 흘려보내는 거룩한 축복의 통로 되길.']
    },
    '유': {
        start: ['유난히 따뜻한 주의 은혜가 당신의 모든 발걸음을 감싸 안고,', '유일하신 하나님만을 온전히 경외하는 믿음의 뿌리가 깊어져서,'],
        mid: ['유업으로 주신 하늘의 보화를 매일의 삶 속에서 보석처럼 발견하며,', '유연하고 넉넉한 마음으로 주님의 사랑을 세상에 널리 실천하고,'],
        end: ['유리바다처럼 맑은 주의 평강이 당신의 심령에 영원히 머물길.', '유달리 빛나는 주의 자녀로 세상 속에서 승리하시길 기도합니다.']
    },
    '홍': {
        start: ['홍수같이 밀려오는 주의 은혜가 당신의 평생을 촉촉이 적시고,', '홍해를 가르신 기적의 하나님이 당신의 앞길을 평탄케 하시길,'],
        mid: ['홍차 한 잔의 여유처럼 주님 안에서 참된 쉼과 회복을 누리며,', '홍조 띤 얼굴로 주를 향한 첫사랑을 수줍게 고백하며 나아가서,'],
        end: ['홍보 대사처럼 주님의 영광을 세상에 널리 알리는 자 되소서.', '홍해 같은 난관 앞에서도 주만 바라보며 담대히 걷길 축복해요.']
    },
    // [이름에 자주 쓰이는 글자 보강]
    '지': {
        start: ['지혜와 계시의 영을 부어주셔서 주를 더 깊이 아는 즐거움을 얻고,', '지극히 높은 곳의 영광이 당신의 삶 낮은 곳까지 가득히 임하며,'],
        mid: ['지금 이 순간도 당신을 위해 친히 간구하시는 주님의 사랑을 믿고,', '지나온 모든 순간이 하나님의 완벽한 은혜였음을 깊이 고백하며,'],
        end: ['지성소의 깊은 임재 속에서 주님과 날마다 친밀히 교제하소서.', '지구 끝까지 복음을 들고 나아가는 주의 신실한 일꾼 되길 원합니다.']
    },
    '수': {
        start: ['수고하고 무거운 짐을 다 주님 발 앞에 내려놓고 참된 쉼을 얻으며,', '수정처럼 맑고 깨끗한 마음으로 주님의 얼굴을 날마다 대면하고,'],
        mid: ['수많은 별들보다 더 빛나는 주님의 약속이 당신의 삶에 실재가 되어,', '수면 위에 비친 평온한 달빛처럼 주의 평강이 당신의 영혼을 덮고,'],
        end: ['수풀 속에 핀 꽃처럼 소박하지만 향기로운 주의 사람 되소서.', '수지맞은 인생처럼 주 안에서 가장 귀한 보물을 소유하시길 축복해요.']
    },
    '진': {
        start: ['진리의 말씀이 당신의 앞길에 등불이 되어 실족치 않게 지켜주시고,', '진실한 고백을 기뻐하시는 주님 앞에 날마다 순전한 아이처럼 서며,'],
        mid: ['진귀한 보석보다 당신을 더 귀히 여기시는 하나님의 마음을 느끼고,', '진흙 속에 핀 꽃처럼 세상을 아름답게 물들이는 향기로운 사람 되어,'],
        end: ['진리 안에서 참된 자유를 누리는 가장 복된 인생 되길 축복합니다.', '진심 어린 당신의 기도가 하늘 보좌에 상달되어 기적이 일어날 거예요.']
    },
    '현': {
        start: ['현명한 지혜로 선한 길을 선택하며 하나님을 날마다 기쁘시게 하고,', '현존하시는 하나님의 영광을 대면하며 그리스도의 장성한 분량까지 자라나서,'],
        mid: ['현실의 벽 너머에서 역사하시는 주님의 손길을 믿음으로 바라보고,', '현기증 나는 세상 속에서도 주의 말씀만을 굳게 붙잡고 중심을 지키며,'],
        end: ['현숙한 여인과 장부처럼 주님의 나라를 견고히 세우는 자 되소서.', '현세와 내세의 모든 복을 주 안에서 풍성히 누리길 간절히 축복합니다.']
    },
    '영': {
        start: ['영원하신 주님의 팔이 당신을 붙드시고 모든 환난에서 건져주시며,', '영광의 빛이 당신의 삶 구석구석을 환하게 밝혀 어둠을 몰아내고,'],
        mid: ['영혼의 깊은 곳에서 터져 나오는 기쁨의 찬양을 주님께 높여 드리고,', '영성 깊은 삶의 고백을 통해 많은 이들에게 선한 영향력을 끼쳐서,'],
        end: ['영원토록 변치 않는 주의 사랑 안에서 늘 행복하시길 축복합니다.', '영원한 생명의 나라를 꿈꾸며 오늘도 믿음으로 승리하는 당신 되소서.']
    },
    '준': {
        start: ['준비하신 여호와 이레의 복이 당신의 삶에 적시적소에 가득 임하고,', '준엄한 주의 말씀 앞에 겸손히 순종하며 거룩한 사명의 길을 걸으며,'],
        mid: ['준비된 마음 위에 성령의 단비가 내려 30배 60배의 결실을 맺고,', '준비된 자를 들어 쓰시는 하나님 앞에 귀하게 발견되는 은혜가 있어,'],
        end: ['준비된 하늘의 보화가 당신의 창고에 가득 차고 넘치길 기도합니다.', '준비된 천국 시민으로서 주와 함께 영원히 왕 노릇 하는 당신 되소서.']
    },
    '예': {
        start: ['예수 그리스도의 은혜와 평강이 당신의 심령에 강물처럼 흐르고,', '예비하신 축복의 통로가 당신의 발걸음 닿는 곳마다 활짝 열리길,'],
        mid: ['예쁜 열매를 맺는 포도나무 가지처럼 주님께 굳게 붙어 있어 살며,', '예배의 감격이 살아있는 삶을 통해 하나님의 기쁨이 되는 당신이 되고,'],
        end: ['예수님만 닮아가는 당신의 인격이 세상의 위로가 되길 축복합니다.', '예측할 수 없는 은혜가 당신의 평생을 풍성하게 채워주실 거예요.']
    },
    '찬': {
        start: ['찬양의 제사가 당신의 입술에서 끊이지 않아 하늘 문이 열리고,', '찬란한 주의 영광이 당신의 삶 위에 머물러 세상을 밝게 비추며,'],
        mid: ['참된 진리를 수호하며 타협하지 않는 믿음의 용기로 세상에 서서,', '찬물 한 그릇의 사랑도 잊지 않으시는 주님의 보상을 경험하며 살고,'],
        end: ['찬미의 제사를 날마다 드리는 하늘 백성으로 승리하며 사소서.', '찬송 중에 거하시는 하나님을 날마다 대면하는 복을 누리길 축복해요.']
    },
    '훈': {
        start: ['훈훈한 성령의 바람이 당신의 마음에 불어와 사랑의 꽃을 피우고,', '훈계의 말씀을 금보다 귀히 여겨 명철한 지혜자의 반열에 서며,'],
        mid: ['훈장보다 귀한 믿음의 증거들이 당신의 삶의 자리마다 가득하고,', '훈훈한 주의 사랑을 나누며 이웃의 아픔을 따뜻하게 돌보는 사람 되어,'],
        end: ['훈습된 주의 향기가 만나는 모든 이에게 위로로 전해지길 축복합니다.', '훈훈한 은혜의 온기가 당신의 삶과 가정에 늘 가득하길 소망해요.']
    }
};

const fallbacks = {
    start: ['{char}심으로 주를 경외하는 당신의 삶에 하늘의 평강이 가득하고,', '{char}랑스러운 주님의 자녀로서 세상의 빛과 소금이 되는 축복이 있길,'],
    mid: ['{char}성스러운 마음으로 주를 섬기는 수고를 주께서 결코 잊지 않으시며,', '{char}망의 소망을 품고 끝까지 인내하며 믿음의 경주를 완주해 나가는,'],
    end: ['{char}광스러운 주의 일에 참여하는 기쁨을 평생토록 누리시길 축복합니다.', '{char}평의 사절로 쓰임 받는 가장 복되고 아름다운 인생이 되시길 원합니다.']
};

const finalBliss = [
    '주님의 이름으로 당신을 오늘 더 축복합니다.',
    '영원토록 주와 동행하는 가장 복된 인생 되소서.',
    '예수 그리스도의 은혜와 평강이 늘 함께하시길 기도합니다.',
    '하늘의 평강이 당신의 생각과 마음을 굳게 지켜주시길 원합니다.'
];

function getRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

const generateBtn = document.getElementById('generateBtn');
const nameInput = document.getElementById('nameInput');
const resultArea = document.getElementById('resultArea');
const poemContent = document.getElementById('poemContent');
const copyBtn = document.getElementById('copyBtn');

generateBtn.addEventListener('click', () => {
    const name = nameInput.value.trim();
    if (!name) {
        alert('성함을 입력해주세요!');
        return;
    }
    generatePoem(name);
});

function generatePoem(name) {
    poemContent.innerHTML = '';
    const characters = name.split('');
    
    characters.forEach((char, index) => {
        const line = document.createElement('div');
        line.className = 'poem-line';
        line.style.animationDelay = `${index * 0.4}s`;
        
        let position = 'mid';
        if (index === 0) position = 'start';
        else if (index === characters.length - 1) position = 'end';

        const source = dictionary[char] || fallbacks;
        const phrase = getRandom(source[position]).replace('{char}', char);
        
        const firstChar = phrase.charAt(0);
        const restOfPhrase = phrase.substring(1);
        
        line.innerHTML = `<span class="first-char">${firstChar}</span>${restOfPhrase}`;
        poemContent.appendChild(line);
    });

    const lastLine = document.createElement('div');
    lastLine.className = 'poem-line final-line';
    lastLine.style.animationDelay = `${characters.length * 0.4}s`;
    lastLine.innerText = getRandom(finalBliss);
    poemContent.appendChild(lastLine);

    resultArea.classList.remove('hidden');
    if (window.navigator.vibrate) window.navigator.vibrate(10);

    setTimeout(() => {
        const yOffset = -50;
        const y = resultArea.getBoundingClientRect().top + window.pageYOffset + yOffset;
        window.scrollTo({top: y, behavior: 'smooth'});
    }, 150);
}

copyBtn.addEventListener('click', () => {
    const text = Array.from(document.querySelectorAll('.poem-line'))
        .map(el => el.innerText)
        .join('\n');
    
    navigator.clipboard.writeText(text).then(() => {
        const originalText = copyBtn.innerText;
        copyBtn.innerText = '✅ 축복 메시지 복사 완료!';
        copyBtn.classList.add('success');
        setTimeout(() => {
            copyBtn.innerText = originalText;
            copyBtn.classList.remove('success');
        }, 2000);
    });
});

nameInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        generateBtn.click();
        nameInput.blur();
    }
});
